#include "components/before_body.html"
		"<script>"
			"var file_id;"
			
			"var file_name;"
			"var dir_name;"
			"var device_id;"
			"var mimetype;"
			"var file_tags;"
			
			"function load_f(_file_id){"
				"file_id = _file_id;"
				"unhide('tags');"
				"hide('parents');"
				"hide('children');"
				"hide('f');"
				"hide('d');"
				"hide('t');"
				"document.getElementById('before-files-tbl').innerHTML = '<a id=\"dir_name\"></a><br/><div id=\"view\"></div><br/><a onclick=\"set_embed_html(\\'#view\\', device_id, document.getElementById(\\'dir_name\\').textContent, file_name)\">View</a>';"
				"unhide('before-files-tbl');"
				"unhide('tagselect-files');"
				"hide('tagselect-self-p');"
				"hide('tagselect-self-c');"
				
				"file_tagger_fn = after_tagged_this_file;"
				"get_file_ids = get_file_id;"
				
				"$.ajax({"
					"dataType: \"json\","
					"url: \"/a/f/i/\"+file_id,"
					"success: function(data){"
						"var s = \"\";"
						
						"document.getElementById('profile-img').src = data[0];"
						"const dir_id = data[1];"
						"file_name = data[2];"
						"file_tags = data[3].split(\",\");"
						"display_tags(file_tags, \"#tags\");"
						"mimetype = data[4];"
						
						"$('#dir_name').attr(\"href\",  \"/d#\" + dir_id);"
						"set_dir_name_from_id(dir_id, \"#dir_name\");"
						
						"$('#profile-name').text(file_name);"
					"},"
					"error: function(){"
						"alert(\"Error populating table\");"
					"}"
				"});"
			"}"
			
			"$(document).ready(function(){" // Only execute after page has finished loading
				"populate_tagselects();"
				"load_f(window.location.hash.substr(1));"
			"});"
		"</script>"

#include "tag_socialmediaised.html"


#include "components/after_body.html"
