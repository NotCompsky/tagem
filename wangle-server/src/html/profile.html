#include "components/before_body.html"
"<script>"
	"var tag_id;"
	"var file_id;"
	"var file_name;"
	"var dir_id;"
	"var dir_name;"
	"var device_id;"
	"var mimetype;"
	"var file_tags;"
	
	"$(document).ready(function(){" // Only execute after page has finished loading
		"hide('tags-container');"
		"hide('parents-container');"
		"hide('children-container');"
		"hide('f');"
		"hide('d');"
		"hide('t');"
		"hide('before-files-tbl');"
		"hide('tagselect-files-container');"
		"hide('tagselect-self-p-container');"
		"hide('tagselect-self-c-container');"
		"populate_tagselects();"
		"fancify_tbl(\"f\");"
		"init_qry();"
		
		"const x = window.location.hash.substr(2);"
		"switch(window.location.hash.substr(1,1)){"
			"case \"f\": view_file(x); break;"
			"case \"d\": view_dir(x);  break;"
			"case \"t\": view_tag(x);  break;"
		"}"
	"});"
"</script>"

"<body>"

R"=========(
<!--
Copyright (c) 2020 by Aysenur Turk (https://codepen.io/TurkAysenur/pen/RwWKYMO)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
<div id="content">
  <div class="left-side">
    <div class="logo">TAGEM</div>
    <div class="side-wrapper">
      <div class="side-title">SITEMAP</div>
      <div class="side-menu">
)========="
#include "components/sitemap.html"
R"=========(
      </div>
    </div>
    <div class="side-wrapper">
      <div class="side-title">RECENT</div>
      <div class="side-menu">
      </div>
    </div>
    <a href="https://twitter.com/AysnrTrkk" class="follow-me" target="_blank">
      <span class="follow-text">
        <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
        CSS/HTML largely based on work by...
     </span>
      <span class="developer">
        <img src="https://pbs.twimg.com/profile_images/1253782473953157124/x56UURmt_400x400.jpg" />
        Aysenur Turk — @AysnrTrkk
      </span>
    </a>
  </div>
  <div class="main">
    <div class="search-bar">
      <input id="qry" type="text" placeholder="Search"/>
      <button class="right-side-button">
         <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
      </button>
    </div>
    <div id="main-container">
      <div class="profile">
        <div class="profile-avatar">
          <img id="profile-img" src="/favicon.ico"/>
          <div id="profile-name"></div>
        </div>
        <img id="profile-cover"/>
)========="
		"<div id=\"profile-menu\">"
			"<a onclick=\"view_dir()\">Dir</a>"
			"<a onclick=\"view_tag()\">Tag</a>"
			"<a onclick=\"view_file()\">File</a>"
			"<a onclick=\"view_files()\">Files</a>"
		"</div>"
	"</div>"


"<div class=\"hidden\" id=\"qry-help\">"
	"<h2>How to Query</h2>"
	"<button onclick=\"hide('qry-help')\">Hide</button>"
	"<p>"
		QRY_USAGE
	"</p>"
"</div>"

"<div id=\"tagging\">"

#define TAG_FN \
	"add_parent_tags_then(tag_id, '#tagselect-self-p', function(){" \
		"display_parent_tags(tag_id, '#parents');" \
	"})"
#define TAGSELECT_ID "tagselect-self-p"
#define TAG_TEXT "Add Parent Tags"
#include "components/add_tag.html"
#undef TAG_FN
#undef TAGSELECT_ID
#undef TAG_TEXT

#define TAG_FN \
	"add_child_tags_then(tag_id, '#tagselect-self-c', function(){" \
		"display_child_tags(tag_id, '#children');" \
	"})"
#define TAGSELECT_ID "tagselect-self-c"
#define TAG_TEXT "Add Child Tags"
#include "components/add_tag.html"
#undef TAG_FN
#undef TAGSELECT_ID
#undef TAG_TEXT

"<div id=\"before-files-tbl\">" // TODO: Rename
	"<a id=\"dir_name\"></a>"
	"<br/>"
	"<div id=\"view\"></div>"
	"<br/>"
	#define TOGGLE_ID "autoplay"
	#define TOGGLE_NAME "Autoplay"
	#include "components/toggle.html"
	"<a id=\"view-btn\" onclick=\"display_this_file(); hide('view-btn')\">View</a>"
"</div>"

#define TAG_TEXT "Add Tags to Files"
#define TAG_FN "tag_files_then(get_file_ids(), '#tagselect-files', file_tagger_fn)"
#define TAGSELECT_ID "tagselect-files"
#include "components/add_tag.html"
#undef TAG_FN
#undef TAGSELECT_ID
#undef TAG_TEXT
#undef FILE_TAGGER_FN
#undef FILE_TAGGER_FILE_IDS

"<button onclick=\"deselect_rows('#f .tr')\">Deselect All</button>"

"</div>"

#define TBL_ID "t"
#define COL1_NAME "Name"
#define COL1_IS_STR
#define TBL_NAME_COLS "[0]"
#define TBL_TAGS_COLS "[]"
#include "components/tbl.html"

#define TBL_ID "d"
#define COL1_NAME "Name"
#define COL1_IS_STR
#define COL2_NAME "Device"
#define COL2_IS_STR
#define TBL_NAME_COLS "[0,1]"
#define TBL_TAGS_COLS "[]"
#include "components/tbl.html"

#define TBL_ID "f"
#define COL1_NAME ""
#define COL2_NAME "Name"
#define COL2_IS_STR
#define COL3_NAME "Tags"
#define COL3_IS_STR
#define TBL_NAME_COLS "[1]"
#define TBL_TAGS_COLS "[2]"
#include "components/tbl.html"

R"=========(
    </div>
  </div>
  <div class="right-side">
    <div class="account">
      <button class="account-button">
        <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
          <path d="M22 6l-10 7L2 6" />
        </svg>
      </button>
      <button class="account-button">
        <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
          <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0" />
        </svg>
      </button>
      <span class="account-user">Quan Ha
        <img src="https://images.genius.com/2326b69829d58232a2521f09333da1b3.1000x1000x1.jpg" alt="" class="account-profile" alt="">
        <span>▼</span>
      </span>
    </div>
)========="
#define SIDE_WRAPPER "parents"
#include "components/side-wrapper.html"

#define SIDE_WRAPPER "children"
#include "components/side-wrapper.html"

#define SIDE_WRAPPER "tags"
#include "components/side-wrapper.html"
R"=========(
    <div class="search-bar right-search">
      <input type="text" placeholder="Search" />
      <div class="search-bar-svgs">
        <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
        </svg>
        <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.34 469.34">
          <path d="M456.84 76.17l-64-64.06c-16.13-16.13-44.18-16.17-60.37.04L45.77 301.67a10.73 10.73 0 00-2.7 4.59L.41 455.73a10.68 10.68 0 0013.19 13.2l149.33-42.7c1.73-.5 3.3-1.42 4.58-2.7l289.33-286.98c8.06-8.07 12.5-18.78 12.5-30.19s-4.44-22.12-12.5-30.2zM285.99 89.74L325.25 129l-205 205-14.7-29.44a10.67 10.67 0 00-9.55-5.9H78.92L286 89.75zM26.2 443.14l13.9-48.64 34.74 34.74-48.64 13.9zm123.14-35.18L98.3 422.54l-51.5-51.5L61.38 320H89.4l18.38 36.77a10.67 10.67 0 004.77 4.77l36.78 18.39v28.03zm21.33-17.54v-17.09c0-4.04-2.28-7.72-5.9-9.54l-29.43-14.7 205-205 39.26 39.26-208.93 207.07zm271.11-268.7l-47.03 46.61L301 74.6l46.59-47c8.06-8.07 22.1-8.07 30.16 0l64 64c4.03 4.03 6.25 9.38 6.25 15.08s-2.22 11.05-6.22 15.05z" /></svg>
        <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
      <path d="M12 5v14M5 12h14"/>
    </svg>
      </div>
    </div>
  </div>
</div>
)========="

"</body>"

#include "components/after_body.html"
