#include "utils_core.js"
#include "utils_tags.js"
#include "utils_dirs.js"
#include "utils_files.js"
#include "utils_tbls.js"


"function populate_str(url, selector, postfnct){"
	"get_json(url, function(data){"
		"document.querySelector(selector).innerHTML = data.join(\",\");"
		"if (postfnct !== undefined){"
			"postfnct();"
		"}"
	"});"
"}"

"function set_embed_html(selector, device_id, dir_name, file_name){"
	"get_json(\"/a/D.json\", function(data){"
		"const embed_pre = data[device_id][2];"
		"if (embed_pre === \"\"){"
			
			"var src;"
			"if (dir_name.startsWith(\"/\")){"
				"src = \"/S/f/\" + file_id;"
			"} else {"
				"src = dir_name + file_name;"
			"}"
			
			"if (/.(jpe?g|png|gif)$/.exec(file_name) !== null){"
				"document.querySelector(selector).innerHTML = \"<img src='\" + src + \"'/>\";"
			"} else {"
				"document.querySelector(selector).innerHTML = \"<video controls><source type='\" + mimetype + \"' src='\" + src + \"'></source></video>\";"
			"}"
			
			"document.querySelector(selector).attr(\"onclick\", \"\");"
		"} else {"
			"document.querySelector(selector).html(embed_pre + file_name + data[device_id][3]);"
		"}"
	"});"
"}"
